{% for disksafe, recovery_points in collection_data.iteritems() %}
    {% for recovery_point in recovery_points %}
<tr id="{{ disksafe.id }}:{{ recovery_point.recoveryPointID }}">
    <td>{{ recovery_point.recoveryPointID }}</td>
    <td>{{ recovery_point.createdOnTimestampInMillis|ms_to_datetime }}</td>
    <td>{{ recovery_point.recoveryPointState|iconize }}</td>
    <td>{{ recovery_point.devices|length }}</td>
    <td>
        {% if recovery_point.recoveryPointState == 'AVAILABLE' %}
        <a class="btn btn-default btn-xs" href="{{ url_for('host_agent_recovery_points_browse', host_id=host.id, ds_uuid=disksafe.id, rp_id=recovery_point.recoveryPointID) }}">
            <i title="Browse" class="fa fa-folder-open fa-lg text-warning icon-space-right"></i>
            Browse
        </a>
        <a class="btn btn-default btn-xs" href="#">
            <i title="Lock" class="fa fa-lock fa-lg icon-space-right"></i>
            Lock
        </a>
        {% endif %}
        {% if recovery_point.recoveryPointState not in ('MERGING', 'MERGED', 'LOCKED') %}
        <a class="btn btn-default btn-xs" href="#">
            <i title="Merge" class="fa fa-times fa-lg text-danger icon-space-right"></i>
            Merge
        </a>
        {% endif %}
        {% if recovery_point.recoveryPointState == 'LOCKED' %}
        <a class="btn btn-default btn-xs" href="#">
            <i title="Unlock" class="fa fa-unlock-alt fa-lg icon-space-right"></i>
            Unlock
        </a>
        {% endif %}
    </td>
</tr>
    {% endfor %}
{% endfor %}
